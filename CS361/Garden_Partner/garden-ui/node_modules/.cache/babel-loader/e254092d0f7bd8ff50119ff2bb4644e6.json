{"ast":null,"code":"var _jsxFileName = \"/Users/peytonwiederspan/CS361/Garden_Partner/garden-ui/src/pages/home.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport '../App.css';\nimport { Link } from 'react-router-dom';\nimport PlantList from '../components/plant_list';\nimport { useHistory } from 'react-router-dom';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction Home({\n  setPlantToEdit\n}) {\n  _s();\n\n  const [plants, setPlant] = useState([]);\n  const history = useHistory();\n  const [location, setLocation] = useState([]);\n  const [temp, setTemp] = useState([]);\n  const [url, setURL] = useState([]);\n\n  const onDelete = async _id => {\n    const response = await fetch(`/plants/${_id}`, {\n      method: 'DELETE'\n    });\n\n    if (response.status === 204) {\n      setPlant(plants.filter(m => m._id !== _id));\n    } else {\n      console.error(`Failed to delete plant with _id = ${_id}, status code = ${response.status}`);\n    }\n  };\n\n  const onEdit = plant => {\n    setPlantToEdit(plant);\n    history.push(\"/edit-plant\");\n  }; //creating IP state\n\n\n  const [ip, setIP] = useState(''); //creating function to load ip address from the API\n\n  const getData = async () => {\n    const res = await axios.get('https://geolocation-db.com/json/');\n    setIP(res.data.IPv4);\n    setURL('http://localhost:5002/location_service/?ip_address=' + res.data.IPv4);\n    console.log('http://localhost:5002/location_service/?ip_address=' + res.data.IPv4);\n  };\n\n  useEffect(() => {\n    //passing getData method to the lifecycle method\n    getData();\n  }, []); //creating IP state\n\n  const [city, setCity] = useState(''); //creating function to load location from the API\n\n  const getCity = async () => {\n    const res = await axios.get(url);\n    console.log(res.data.city);\n    setCity(res.data.city);\n  };\n\n  useEffect(() => {\n    //passing getData method to the lifecycle method\n    getCity();\n  }, []);\n\n  const loadPlant = async () => {\n    const response = await fetch('/plants');\n    const data = await response.json();\n    setPlant(data);\n  };\n\n  useEffect(() => {\n    loadPlant();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"List of Plants\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 15\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: [\"My Location: \", location]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 15\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: e => setLocation(ip),\n      children: \"Update Location\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 16\n    }, this), /*#__PURE__*/_jsxDEV(PlantList, {\n      plants: plants,\n      onDelete: onDelete,\n      onEdit: onEdit\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 15\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Home, \"f2oagRkpENiAZ2jVRTRrtYiW1TI=\", false, function () {\n  return [useHistory];\n});\n\n_c = Home;\nexport default Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["/Users/peytonwiederspan/CS361/Garden_Partner/garden-ui/src/pages/home.js"],"names":["React","useState","useEffect","Link","PlantList","useHistory","axios","Home","setPlantToEdit","plants","setPlant","history","location","setLocation","temp","setTemp","url","setURL","onDelete","_id","response","fetch","method","status","filter","m","console","error","onEdit","plant","push","ip","setIP","getData","res","get","data","IPv4","log","city","setCity","getCity","loadPlant","json","e"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport '../App.css'\nimport { Link } from 'react-router-dom';\nimport PlantList from '../components/plant_list';\nimport { useHistory } from 'react-router-dom';\nimport axios from 'axios';\n\n\nfunction Home({setPlantToEdit}) {\n      const [plants, setPlant] = useState([]);\n      const history = useHistory();\n      const [location, setLocation] = useState([]);\n      const [temp, setTemp] = useState([]);\n      const [url, setURL] = useState([]);\n\n\n      const onDelete = async _id => {\n        const response = await fetch(`/plants/${_id}`, { method: 'DELETE' });\n        if (response.status === 204) {\n            setPlant(plants.filter(m => m._id !== _id));\n        } else {\n            console.error(`Failed to delete plant with _id = ${_id}, status code = ${response.status}`);\n        }\n    };\n\n\n      const onEdit = plant => {\n          setPlantToEdit(plant);\n          history.push(\"/edit-plant\");\n      }\n\n      //creating IP state\n      const [ip, setIP] = useState('');\n\n      //creating function to load ip address from the API\n      const getData = async () => {\n        const res = await axios.get('https://geolocation-db.com/json/')\n        setIP(res.data.IPv4)\n        setURL('http://localhost:5002/location_service/?ip_address='+res.data.IPv4)\n        console.log('http://localhost:5002/location_service/?ip_address='+res.data.IPv4)\n\n      }\n\n      useEffect( () => {\n        //passing getData method to the lifecycle method\n        getData()\n\n      }, []);\n\n      //creating IP state\n      const [city, setCity] = useState('');\n      //creating function to load location from the API\n      const getCity = async () => {\n        const res = await axios.get(url)\n        console.log(res.data.city);\n        setCity(res.data.city)\n\n      }\n\n      useEffect( () => {\n        //passing getData method to the lifecycle method\n        getCity()\n\n      }, []);\n\n      const loadPlant = async () => {\n          const response = await fetch('/plants');\n          const data = await response.json();\n          setPlant(data);\n      };\n\n      useEffect(() => {\n          loadPlant();\n      }, []);\n\n      return (\n          <>\n              <h2>List of Plants</h2>\n              <h3>My Location: {location}</h3>\n               <button onClick={e => setLocation(ip)}>Update Location</button>\n              <PlantList plants={plants}onDelete={onDelete}onEdit={onEdit}></PlantList>\n\n          </>\n      );\n  }\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}